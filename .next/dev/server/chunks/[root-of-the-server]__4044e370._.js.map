{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/danish/codeplayground/GMBserp/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient }\n\nexport const prisma =\n  globalForPrisma.prisma ||\n  new PrismaClient()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,sMAAY;AAElB,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/danish/codeplayground/GMBserp/src/app/api/proxies/fetch/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { prisma } from '@/lib/prisma';\n\nexport async function POST() {\n    try {\n        const sources = [\n            { name: 'TheSpeedX', url: 'https://raw.githubusercontent.com/TheSpeedX/PROXY-List/master/http.txt' },\n            { name: 'ShiftyTR', url: 'https://raw.githubusercontent.com/ShiftyTR/Proxy-List/master/http.txt' }\n        ];\n\n        let allProxies: string[] = [];\n        const logs: string[] = [];\n\n        for (const source of sources) {\n            try {\n                const res = await fetch(source.url);\n                const text = await res.text();\n                const lines = text.split('\\n').map(l => l.trim()).filter(l => l.includes(':'));\n                allProxies = [...allProxies, ...lines];\n                logs.push(`Fetched ${lines.length} proxies from ${source.name}`);\n            } catch (err) {\n                console.error(`Failed to fetch from ${source.name}:`, err);\n                logs.push(`Failed to fetch from ${source.name}`);\n            }\n        }\n\n        const uniqueProxies = Array.from(new Set(allProxies)).slice(0, 50);\n\n        for (const entry of uniqueProxies) {\n            const [host, port] = entry.split(':');\n            if (!host || !port) continue;\n\n            const exists = await prisma.proxy.findFirst({\n                where: { host, port: parseInt(port) }\n            });\n\n            if (!exists) {\n                await prisma.proxy.create({\n                    data: {\n                        host,\n                        port: parseInt(port),\n                        type: 'DATACENTER',\n                        enabled: true\n                    }\n                });\n            }\n        }\n\n        return NextResponse.json({\n            success: true,\n            sources: sources.map(s => s.name),\n            logs,\n            count: uniqueProxies.length\n        });\n\n    } catch (error) {\n        console.error('Proxy fetcher error:', error);\n        return NextResponse.json({ error: 'Failed to fetch proxies' }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,UAAU;YACZ;gBAAE,MAAM;gBAAa,KAAK;YAAyE;YACnG;gBAAE,MAAM;gBAAY,KAAK;YAAwE;SACpG;QAED,IAAI,aAAuB,EAAE;QAC7B,MAAM,OAAiB,EAAE;QAEzB,KAAK,MAAM,UAAU,QAAS;YAC1B,IAAI;gBACA,MAAM,MAAM,MAAM,MAAM,OAAO,GAAG;gBAClC,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,MAAM,QAAQ,KAAK,KAAK,CAAC,MAAM,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC;gBACzE,aAAa;uBAAI;uBAAe;iBAAM;gBACtC,KAAK,IAAI,CAAC,CAAC,QAAQ,EAAE,MAAM,MAAM,CAAC,cAAc,EAAE,OAAO,IAAI,EAAE;YACnE,EAAE,OAAO,KAAK;gBACV,QAAQ,KAAK,CAAC,CAAC,qBAAqB,EAAE,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE;gBACtD,KAAK,IAAI,CAAC,CAAC,qBAAqB,EAAE,OAAO,IAAI,EAAE;YACnD;QACJ;QAEA,MAAM,gBAAgB,MAAM,IAAI,CAAC,IAAI,IAAI,aAAa,KAAK,CAAC,GAAG;QAE/D,KAAK,MAAM,SAAS,cAAe;YAC/B,MAAM,CAAC,MAAM,KAAK,GAAG,MAAM,KAAK,CAAC;YACjC,IAAI,CAAC,QAAQ,CAAC,MAAM;YAEpB,MAAM,SAAS,MAAM,gIAAM,CAAC,KAAK,CAAC,SAAS,CAAC;gBACxC,OAAO;oBAAE;oBAAM,MAAM,SAAS;gBAAM;YACxC;YAEA,IAAI,CAAC,QAAQ;gBACT,MAAM,gIAAM,CAAC,KAAK,CAAC,MAAM,CAAC;oBACtB,MAAM;wBACF;wBACA,MAAM,SAAS;wBACf,MAAM;wBACN,SAAS;oBACb;gBACJ;YACJ;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT,SAAS,QAAQ,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI;YAChC;YACA,OAAO,cAAc,MAAM;QAC/B;IAEJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA0B,GAAG;YAAE,QAAQ;QAAI;IACjF;AACJ"}}]
}